package sbnz.integracija;

import sbz.cardiagnosticbe.model.drools.Dtc;
import sbz.cardiagnosticbe.model.enums.VehiclePart;
import sbz.cardiagnosticbe.model.drools.Dtc;
import sbz.cardiagnosticbe.model.drools.FailureList;
import sbz.cardiagnosticbe.model.Failure;

rule "Filtering failure by DTC"
    agenda-group "failure-by-dtc"
    when
        $dtc: Dtc($dtcStr: dtc)
        $f: Failure($id: id)
        $result: FailureList()
        filterFailure($id, $dtcStr;)
    then
        System.out.println("Filtered failure: %s" + $f);
        $result.getFailures().add($f);
end

query filterFailure(Long _id, String _dtc)
    Failure(id == _id, DTC.contains(_dtc))
end